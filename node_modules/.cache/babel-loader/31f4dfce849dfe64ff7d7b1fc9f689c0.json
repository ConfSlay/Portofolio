{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\ricar\\\\Desktop\\\\myPortfolio\\\\myPortofolio\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\ricar\\\\Desktop\\\\myPortfolio\\\\myPortofolio\\\\src\\\\components\\\\Project\\\\GetOneProject.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Link, useParams, useNavigate } from \"react-router-dom\";\nimport Swal from \"sweetalert2\";\nimport ProjectDataService from \"../../services/project.service\";\nimport AuthService from \"../../services/auth.service\";\nimport App from \"../../App\";\nimport ToastDisplayer from \"../ToastDisplayer\";\nimport Caroussel from \"./Caroussel\";\nexport default function GetOneProject(props) {\n  //----------------------------REDIRECTION APRES click sur bouton update ou incorrect :id-----------------------\n  var navigate = useNavigate();\n  useEffect(function () {\n    //si le composant a été updated d'une manière quelconque (state) alors ca s'execute\n    if (redirect === true) {\n      navigate('/Projects');\n    }\n\n    if (notFound === true) {\n      navigate('/NotFound');\n    }\n  });\n\n  function redirectToUpdate(id) {\n    navigate(\"/Project/update/\" + id);\n  } // ----------------- Initialize State -------------------\n\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      notFound = _useState2[0],\n      setNotFound = _useState2[1]; //id not found\n\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loaded = _useState4[0],\n      setLoaded = _useState4[1]; //data not loaded \n\n\n  var _useState5 = useState( //déclare project en tant que liste key/value\n  {\n    project_id: null,\n    project_name: \"\",\n    project_technologies: \"\",\n    project_description: \"\",\n    project_thumbnail_filename: \"\",\n    project_images: null,\n    project_is_file_format: true,\n    project_release_filename: \"\",\n    project_release_url: \"\"\n  }),\n      _useState6 = _slicedToArray(_useState5, 2),\n      project = _useState6[0],\n      setProject = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      redirect = _useState8[0],\n      setRedirect = _useState8[1]; // ----------------- Get request params -------------------\n\n\n  var _useParams = useParams(),\n      id = _useParams.id; //Retrouve le paramètre id\n  // useEffect = quand le composant est inétgré dans le DOM \n\n\n  useEffect(function () {\n    getProject();\n  }, []); //notice the empty array here so it only happens once\n\n  var getProject = function getProject() {\n    ProjectDataService.get(id).then(function (response) {\n      setProject(response.data);\n      console.log(response.data);\n      setLoaded(true);\n    }).catch(function (e) {\n      setNotFound(true);\n      console.log(e);\n    });\n  };\n\n  var deleteProject = function deleteProject(id) {\n    //SWAL\n    Swal.fire({\n      position: 'center',\n      icon: 'warning',\n      title: 'Voulez-vous vraiment supprimer ce projet ?',\n      showCancelButton: true,\n      showConfirmButton: true,\n      confirmButtonText: 'Oui',\n      cancelButtonText: \"Non\",\n      iconColor: 'rgb(232,16,41)',\n      confirmButtonColor: \"rgb(232,16,41)\",\n      cancelButtonColor: \"rgb(61,61,61)\",\n      background: 'rgb(33,33,33)',\n      color: 'rgb(255,255,255)'\n    }).then(function (result) {\n      if (result.isConfirmed) {\n        //DELETE PROJECT  \n        ProjectDataService.delete(id).then(function (response) {\n          console.log(response.data);\n          ToastDisplayer(false, \"Project deleted !\");\n          setRedirect(true); //Redirection vers page virtuelle Project\n        }).catch(function (e) {\n          ToastDisplayer(true, \"An error occured ...\");\n          console.log(e);\n        });\n      }\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"wrapper-discover\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"box-discover\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }\n  }, props.isAdmin ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"buttons-project\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"deleteProjectButton-project alertDisplayerDelete_JS\",\n    onClick: deleteProject.bind(this, project.project_id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }, \"Delete project\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"updateProjectButton-project\",\n    onClick: redirectToUpdate.bind(this, project.project_id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }\n  }, \"Update project\")) : null, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"item-discover title-discover\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 9\n    }\n  }, project.project_name), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"item-discover tag-discover\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 9\n    }\n  }, project.project_technologies), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"item-discover description-discover\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 9\n    }\n  }, project.project_description), /*#__PURE__*/React.createElement(Caroussel, {\n    loaded: loaded,\n    project: project,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 9\n    }\n  }), project.project_is_file_format === true ? /*#__PURE__*/React.createElement(\"a\", {\n    className: \"item-discover link-project\",\n    href: ProjectDataService.getUploadsFiles + project.project_release_filename,\n    download: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 11\n    }\n  }, \"T\\xE9l\\xE9charger\") : /*#__PURE__*/React.createElement(\"a\", {\n    className: \"item-discover link-project\",\n    href: project.project_release_url,\n    target: \"_blank\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 11\n    }\n  }, \"Lien\")));\n}","map":{"version":3,"sources":["C:/Users/ricar/Desktop/myPortfolio/myPortofolio/src/components/Project/GetOneProject.js"],"names":["React","useState","useEffect","Link","useParams","useNavigate","Swal","ProjectDataService","AuthService","App","ToastDisplayer","Caroussel","GetOneProject","props","navigate","redirect","notFound","redirectToUpdate","id","setNotFound","loaded","setLoaded","project_id","project_name","project_technologies","project_description","project_thumbnail_filename","project_images","project_is_file_format","project_release_filename","project_release_url","project","setProject","setRedirect","getProject","get","then","response","data","console","log","catch","e","deleteProject","fire","position","icon","title","showCancelButton","showConfirmButton","confirmButtonText","cancelButtonText","iconColor","confirmButtonColor","cancelButtonColor","background","color","result","isConfirmed","delete","isAdmin","bind","getUploadsFiles"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link , useParams , useNavigate } from \"react-router-dom\";\r\nimport Swal from \"sweetalert2\";\r\nimport ProjectDataService from \"../../services/project.service\";\r\nimport AuthService from \"../../services/auth.service\";\r\nimport App from \"../../App\";\r\nimport ToastDisplayer from \"../ToastDisplayer\";\r\nimport Caroussel from \"./Caroussel\";\r\n\r\n\r\nexport default function GetOneProject(props) {\r\n\r\n  //----------------------------REDIRECTION APRES click sur bouton update ou incorrect :id-----------------------\r\n  const navigate = useNavigate();\r\n  useEffect(() => { //si le composant a été updated d'une manière quelconque (state) alors ca s'execute\r\n    if (redirect === true) {\r\n      navigate('/Projects');\r\n    }\r\n    if (notFound === true)\r\n    {\r\n      navigate('/NotFound');\r\n    }\r\n  });\r\n\r\n  function redirectToUpdate(id){\r\n    navigate(\"/Project/update/\"+id);\r\n  }\r\n\r\n  // ----------------- Initialize State -------------------\r\n  const [notFound,setNotFound] = useState (false); //id not found\r\n  const [loaded,setLoaded] = useState (false); //data not loaded \r\n\r\n  const [project,setProject] = useState( //déclare project en tant que liste key/value\r\n    {\r\n      project_id: null,\r\n      project_name: \"\",\r\n      project_technologies: \"\",\r\n      project_description: \"\",\r\n      project_thumbnail_filename: \"\",\r\n      project_images : null,\r\n      project_is_file_format: true,\r\n      project_release_filename: \"\",\r\n      project_release_url: \"\" \r\n    }\r\n  );\r\n\r\n  const [redirect,setRedirect] = useState (false);\r\n\r\n  // ----------------- Get request params -------------------\r\n  const { id } = useParams(); //Retrouve le paramètre id\r\n  // useEffect = quand le composant est inétgré dans le DOM \r\n  useEffect(()=>{ getProject(); },[]) //notice the empty array here so it only happens once\r\n\r\n  const getProject = () => {\r\n    ProjectDataService.get(id)\r\n      .then(response => {\r\n        setProject(response.data);\r\n        console.log(response.data);\r\n        setLoaded(true);\r\n      })\r\n      .catch(e => {\r\n        setNotFound(true);\r\n        console.log(e);\r\n      });\r\n  }\r\n  \r\n  const deleteProject = (id) => { \r\n    //SWAL\r\n    Swal.fire({\r\n      position: 'center',\r\n      icon: 'warning',\r\n      title: 'Voulez-vous vraiment supprimer ce projet ?',\r\n      showCancelButton: true,\r\n      showConfirmButton: true,\r\n      confirmButtonText: 'Oui',\r\n      cancelButtonText: \"Non\",\r\n      iconColor : 'rgb(232,16,41)',\r\n      confirmButtonColor: \"rgb(232,16,41)\",\r\n      cancelButtonColor: \"rgb(61,61,61)\",\r\n      background: 'rgb(33,33,33)',\r\n      color : 'rgb(255,255,255)'\r\n    }).then((result) => {\r\n     if (result.isConfirmed) {\r\n        //DELETE PROJECT  \r\n        ProjectDataService.delete(id)      \r\n        .then(response => {\r\n            console.log(response.data);\r\n            ToastDisplayer(false,\"Project deleted !\");\r\n            setRedirect(true); //Redirection vers page virtuelle Project\r\n        })\r\n        .catch(e => {\r\n            ToastDisplayer(true,\"An error occured ...\");\r\n            console.log(e);\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  return (\r\n    <div className=\"wrapper-discover\">\r\n      <div className=\"box-discover\">\r\n\r\n\r\n        { props.isAdmin ?\r\n\r\n          <div className=\"buttons-project\"> \r\n          \r\n            <button className=\"deleteProjectButton-project alertDisplayerDelete_JS\" \r\n              onClick={deleteProject.bind(this, project.project_id)}\r\n            >Delete project</button> \r\n\r\n            <button className=\"updateProjectButton-project\" \r\n              onClick={redirectToUpdate.bind(this, project.project_id)}\r\n            >Update project</button> \r\n\r\n          </div> \r\n\r\n        :\r\n          null\r\n        }\r\n\r\n        \r\n\r\n        <span className=\"item-discover title-discover\">{ project.project_name }</span>\r\n\r\n        <span className=\"item-discover tag-discover\">{ project.project_technologies }</span>  \r\n\r\n        <span className=\"item-discover description-discover\">{ project.project_description }</span>\r\n\r\n        \r\n        <Caroussel\r\n          loaded={loaded}\r\n          project={project}\r\n        >\r\n        </Caroussel>\r\n\r\n\r\n        { project.project_is_file_format === true ? \r\n          <a className=\"item-discover link-project\" \r\n            href={ProjectDataService.getUploadsFiles+project.project_release_filename} \r\n            download>Télécharger</a>\r\n        :\r\n          <a className=\"item-discover link-project\" \r\n            href={project.project_release_url} target=\"_blank\">Lien</a>\r\n        }  \r\n\r\n      </div>\r\n  </div>\r\n  );\r\n}\r\n\r\n\r\n "]},"metadata":{},"sourceType":"module"}