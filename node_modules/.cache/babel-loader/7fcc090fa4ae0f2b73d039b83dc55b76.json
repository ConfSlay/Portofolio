{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\ricar\\\\Desktop\\\\myPortfolio\\\\myPortofolio\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\ricar\\\\Desktop\\\\myPortfolio\\\\myPortofolio\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport axios from \"axios\";\nvar API_URL = \"http://localhost:3006/api/auth/\";\n\nvar login = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(username, password) {\n    var authentification;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return axios.post(API_URL + \"login\", {\n              username: username,\n              password: password\n            }).catch(function (error) {\n              //tout code http autre que 200 sera ici\n              return false;\n            });\n\n          case 2:\n            authentification = _context.sent;\n\n            if (!(authentification === false)) {\n              _context.next = 7;\n              break;\n            }\n\n            return _context.abrupt(\"return\", false);\n\n          case 7:\n            localStorage.setItem(\"user\", JSON.stringify(authentification.data));\n            return _context.abrupt(\"return\", true);\n\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function login(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar logout = function logout() {\n  localStorage.removeItem(\"user\");\n  return axios.post(API_URL + \"logout\").then(function (response) {\n    return response.data;\n  });\n};\n\nvar getCurrentUser = function getCurrentUser() {\n  return JSON.parse(localStorage.getItem(\"user\"));\n};\n\nvar AuthService = {\n  login: login,\n  logout: logout,\n  getCurrentUser: getCurrentUser\n};\nexport default AuthService;","map":{"version":3,"sources":["C:/Users/ricar/Desktop/myPortfolio/myPortofolio/src/services/auth.service.js"],"names":["axios","API_URL","login","username","password","post","catch","error","authentification","localStorage","setItem","JSON","stringify","data","logout","removeItem","then","response","getCurrentUser","parse","getItem","AuthService"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,IAAMC,OAAO,GAAG,iCAAhB;;AAEA,IAAMC,KAAK;AAAA,sEAAG,iBAAOC,QAAP,EAAiBC,QAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAEmBJ,KAAK,CAACK,IAAN,CAAWJ,OAAO,GAAG,OAArB,EAA8B;AAACE,cAAAA,QAAQ,EAARA,QAAD;AAAUC,cAAAA,QAAQ,EAARA;AAAV,aAA9B,EAC5BE,KAD4B,CACtB,UAAAC,KAAK,EAAI;AAAE;AAChB,qBAAO,KAAP;AACH,aAH8B,CAFnB;;AAAA;AAENC,YAAAA,gBAFM;;AAAA,kBAQRA,gBAAgB,KAAK,KARb;AAAA;AAAA;AAAA;;AAAA,6CAUH,KAVG;;AAAA;AAcVC,YAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAeJ,gBAAgB,CAACK,IAAhC,CAA7B;AAdU,6CAeH,IAfG;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAALX,KAAK;AAAA;AAAA;AAAA,GAAX;;AAmBA,IAAMY,MAAM,GAAG,SAATA,MAAS,GAAM;AACnBL,EAAAA,YAAY,CAACM,UAAb,CAAwB,MAAxB;AACA,SAAOf,KAAK,CAACK,IAAN,CAAWJ,OAAO,GAAG,QAArB,EAA+Be,IAA/B,CAAoC,UAACC,QAAD,EAAc;AACvD,WAAOA,QAAQ,CAACJ,IAAhB;AACD,GAFM,CAAP;AAGD,CALD;;AAOA,IAAMK,cAAc,GAAG,SAAjBA,cAAiB,GAAM;AAE3B,SAAOP,IAAI,CAACQ,KAAL,CAAWV,YAAY,CAACW,OAAb,CAAqB,MAArB,CAAX,CAAP;AAED,CAJD;;AAMA,IAAMC,WAAW,GAAG;AAClBnB,EAAAA,KAAK,EAALA,KADkB;AAElBY,EAAAA,MAAM,EAANA,MAFkB;AAGlBI,EAAAA,cAAc,EAAdA;AAHkB,CAApB;AAMA,eAAeG,WAAf","sourcesContent":["import axios from \"axios\";\r\nconst API_URL = \"http://localhost:3006/api/auth/\";\r\n\r\nconst login = async (username, password) => {\r\n\r\n  const authentification = await axios.post(API_URL + \"login\", {username,password,})\r\n    .catch(error => { //tout code http autre que 200 sera ici\r\n      return false;\r\n  });\r\n\r\n\r\n  if (authentification === false)\r\n  {\r\n    return false;\r\n  }\r\n  else \r\n  {\r\n    localStorage.setItem(\"user\", JSON.stringify(authentification.data));\r\n    return true;\r\n  }\r\n};\r\n\r\nconst logout = () => {\r\n  localStorage.removeItem(\"user\");\r\n  return axios.post(API_URL + \"logout\").then((response) => {\r\n    return response.data;\r\n  });\r\n};\r\n\r\nconst getCurrentUser = () => {\r\n  \r\n  return JSON.parse(localStorage.getItem(\"user\"));\r\n  \r\n};\r\n\r\nconst AuthService = {\r\n  login,\r\n  logout,\r\n  getCurrentUser,\r\n}\r\n\r\nexport default AuthService;\r\n"]},"metadata":{},"sourceType":"module"}