{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\ricar\\\\Desktop\\\\myPortfolio\\\\myPortofolio\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"C:\\\\Users\\\\ricar\\\\Desktop\\\\myPortfolio\\\\myPortofolio\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\ricar\\\\Desktop\\\\myPortfolio\\\\myPortofolio\\\\src\\\\components\\\\Project\\\\UpdateProject.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport ProjectDataService from \"../../services/project.service\"; //Components\n\nimport App from \"../../App\";\nimport FormProject from \"./FormProject\";\nimport ToastDisplayer from \"../ToastDisplayer\";\nexport default function UpdateProject(props) {\n  //----------------------------REDIRECTION APRES VALIDATION DU FORM ou 404 -----------------------\n  var navigate = useNavigate();\n  useEffect(function () {\n    //si le composant a été updated d'une manière quelconque (state) alors ca s'execute\n    if (project.project_is_updated) {\n      navigate('/Projects');\n    }\n\n    if (notFound === true) {\n      navigate('/NotFound');\n    }\n\n    if (dataFound === true) {\n      setRemoveButtons();\n    } // ----- Check if Admin AND redirect if not-------------\n\n\n    if (!props.isAdmin) {\n      navigate('/Projects');\n    }\n  }); //--------------------------------- State Initial -------------------------------------\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      disabledSubmit = _useState2[0],\n      setDisabledSubmit = _useState2[1]; // Bloquage du bouton submit durant process\n\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      notFound = _useState4[0],\n      setNotFound = _useState4[1]; //id not found\n\n\n  var _useState5 = useState( //déclare en tant que liste key/value\n  {\n    project_name: \"\",\n    project_technologies: \"\",\n    project_description: \"\",\n    project_thumbnail_filename: null,\n    project_is_youtube_not_images: true,\n    project_youtube_link: \"\",\n    project_images: [],\n    project_is_file_format: true,\n    project_release_filename: null,\n    project_release_url: \"\",\n    project_is_updated: false\n  }),\n      _useState6 = _slicedToArray(_useState5, 2),\n      project = _useState6[0],\n      setProject = _useState6[1]; //Pour reset une et une seule fois, en mode update, le champ file \n  // cad supprimer le fichier côté serveur\n\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      dataFound = _useState8[0],\n      setDataFound = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      removeThumbnailPossibility = _useState10[0],\n      setRemoveThumbnailPossibility = _useState10[1];\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      removeImagesPossibility = _useState12[0],\n      setRemoveImagesPossibility = _useState12[1];\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      removeReleaseFilePossibility = _useState14[0],\n      setRemoveReleaseFilePossibility = _useState14[1];\n\n  var _useState15 = useState({\n    isValid: true,\n    message: \"\"\n  }),\n      _useState16 = _slicedToArray(_useState15, 2),\n      nameValidation = _useState16[0],\n      setNameValidation = _useState16[1];\n\n  var _useState17 = useState({\n    isValid: true,\n    message: \"\"\n  }),\n      _useState18 = _slicedToArray(_useState17, 2),\n      technologiesValidation = _useState18[0],\n      setTechnologiesValidation = _useState18[1];\n\n  var _useState19 = useState({\n    isValid: true,\n    message: \"\"\n  }),\n      _useState20 = _slicedToArray(_useState19, 2),\n      descriptionValidation = _useState20[0],\n      setDescriptionValidation = _useState20[1];\n\n  var _useState21 = useState({\n    isValid: true,\n    message: \"\"\n  }),\n      _useState22 = _slicedToArray(_useState21, 2),\n      thumbnailValidation = _useState22[0],\n      setThumbnailValidation = _useState22[1];\n\n  var _useState23 = useState({\n    isValid: true,\n    message: \"\"\n  }),\n      _useState24 = _slicedToArray(_useState23, 2),\n      youtubeLinkValidation = _useState24[0],\n      setYoutubeLinkValidation = _useState24[1];\n\n  var _useState25 = useState({\n    isValid: true,\n    message: \"\"\n  }),\n      _useState26 = _slicedToArray(_useState25, 2),\n      imagesValidation = _useState26[0],\n      setImagesValidation = _useState26[1];\n\n  var _useState27 = useState({\n    isValid: true,\n    message: \"\"\n  }),\n      _useState28 = _slicedToArray(_useState27, 2),\n      releaseFileValidation = _useState28[0],\n      setReleaseFileValidation = _useState28[1];\n\n  var _useState29 = useState({\n    isValid: true,\n    message: \"\"\n  }),\n      _useState30 = _slicedToArray(_useState29, 2),\n      releaseUrlValidation = _useState30[0],\n      setReleaseUrlValidation = _useState30[1]; // --------------- actualisation du state pour MODE UPDATE (herité avec props) -------------------------------\n\n\n  var _useParams = useParams(),\n      id = _useParams.id; //Retrouve le paramètre id\n\n\n  useEffect(function () {\n    // à l'instanciation du component     \n    getProject(id);\n  }, []); //notice the empty array here so it only happens once \n\n  var getProject = function getProject(id) {\n    ProjectDataService.get(id).then(function (response) {\n      setProject(response.data);\n      setDataFound(true); //pour définir les options de removes avec croix rouge   \n    }).catch(function (e) {\n      setNotFound(true);\n      console.log(e);\n    });\n  };\n\n  var setRemoveButtons = function setRemoveButtons() {\n    setRemoveThumbnailPossibility(true); //Enclenche la possibilité de supprimer le fichier côté serveur\n\n    if (project.project_is_youtube_not_images === false) //seulement si c'est un release de type file\n      {\n        setRemoveImagesPossibility(true); //Enclenche la possibilité de supprimer le fichier côté serveur\n      }\n\n    if (project.project_is_file_format === true) //seulement si c'est un release de type file\n      {\n        setRemoveReleaseFilePossibility(true); //Enclenche la possibilité de supprimer le fichier côté serveur\n      }\n\n    setDataFound(undefined); //Reset pour éviter que ca ne relance cette fonction à chaque modif du state\n  }; // ------------------------- Evenementiel (modification du state en fonction des inputs) -------------------------\n\n\n  var onChangeProject_name = function onChangeProject_name(e) {\n    setProject(function (prevState) {\n      return _objectSpread({}, prevState, {\n        project_name: e.target.value\n      });\n    });\n  };\n\n  var onChangeProject_technologies = function onChangeProject_technologies(e) {\n    setProject(function (prevState) {\n      return _objectSpread({}, prevState, {\n        project_technologies: e.target.value\n      });\n    });\n  };\n\n  var onChangeProject_description = function onChangeProject_description(e) {\n    setProject(function (prevState) {\n      return _objectSpread({}, prevState, {\n        project_description: e.target.value\n      });\n    });\n  };\n\n  var onChangeProject_thumbnail_filename = function onChangeProject_thumbnail_filename(e) {\n    setProject(function (prevState) {\n      return _objectSpread({}, prevState, {\n        project_thumbnail_filename: e.target.files[0]\n      }); //pcq c'est un fichier\n    });\n  };\n\n  var onResetProject_thumbnail_filename = function onResetProject_thumbnail_filename() {\n    setProject(function (prevState) {\n      return _objectSpread({}, prevState, {\n        project_thumbnail_filename: null\n      }); //pcq c'est un fichier\n    });\n    setRemoveThumbnailPossibility(false);\n  };\n\n  var onChangeProject_is_youtube_not_images = function onChangeProject_is_youtube_not_images(e) {\n    var result = true; //si on passe e.target.value, project_is_file_format pointera sur un objet et non une valeur\n    // du coup setState n'aura plus d'incidence\n\n    if (e.target.value === \"true\") {\n      result = true;\n      setProject(function (prevState) {\n        return _objectSpread({}, prevState, {\n          project_images_updated: false\n        }); //pcq c'est un fichier\n      });\n    } else {\n      result = false;\n      setProject(function (prevState) {\n        return _objectSpread({}, prevState, {\n          project_images_updated: true\n        }); //pcq c'est un fichier\n      });\n    }\n\n    setProject(function (prevState) {\n      return _objectSpread({}, prevState, {\n        project_is_youtube_not_images: result\n      });\n    });\n  };\n\n  var onChangeProject_youtube_link = function onChangeProject_youtube_link(e) {\n    setProject(function (prevState) {\n      return _objectSpread({}, prevState, {\n        project_youtube_link: e.target.value\n      });\n    });\n  };\n\n  var onChangeProject_images = function onChangeProject_images(e) {\n    setProject(function (prevState) {\n      return _objectSpread({}, prevState, {\n        project_images: e.target.files\n      }); //pas d'index pcq c'est multifile\n    });\n  };\n\n  var onResetProject_images = function onResetProject_images() {\n    setProject(function (prevState) {\n      return _objectSpread({}, prevState, {\n        project_images_updated: true\n      }); //pcq c'est un fichier\n    });\n    setRemoveImagesPossibility(false);\n  };\n\n  var onChangeProject_is_file_format = function onChangeProject_is_file_format(e) {\n    var result = true; //si on passe e.target.value, project_is_file_format pointera sur un objet et non une valeur\n    // du coup setState n'aura plus d'incidence\n\n    if (e.target.value === \"true\") {\n      result = true;\n    } else {\n      result = false;\n    }\n\n    setProject(function (prevState) {\n      return _objectSpread({}, prevState, {\n        project_is_file_format: result\n      });\n    });\n  };\n\n  var onChangeProject_release_filename = function onChangeProject_release_filename(e) {\n    setProject(function (prevState) {\n      return _objectSpread({}, prevState, {\n        project_release_filename: e.target.files[0]\n      });\n    });\n  };\n\n  var onResetProject_release_filename = function onResetProject_release_filename() {\n    setProject(function (prevState) {\n      return _objectSpread({}, prevState, {\n        project_release_filename: null\n      }); //pcq c'est un fichier\n    });\n    setRemoveReleaseFilePossibility(false);\n  };\n\n  var onChangeProject_release_url = function onChangeProject_release_url(e) {\n    setProject(function (prevState) {\n      return _objectSpread({}, prevState, {\n        project_release_url: e.target.value\n      });\n    });\n  }; //------------------------------------ CALL API ----------------------------------------------------------\n\n\n  var saveProject = function saveProject(e) {\n    if (disabledSubmit === false) {\n      setDisabledSubmit(true); //------------- instanciation d'un objet FormData pour envoyer les données à l'API --------------   \n\n      var data = new FormData(); // --> \"content\" : \"multipart/form-data\"\n\n      data.append('project_name', project.project_name);\n      data.append('project_technologies', project.project_technologies);\n      data.append('project_description', project.project_description);\n      data.append('project_thumbnail_filename', project.project_thumbnail_filename);\n      data.append('project_is_youtube_not_images', project.project_is_youtube_not_images);\n      data.append('project_youtube_link', project.project_youtube_link); // images files\n\n      data.append('project_images_updated', project.project_images_updated); //Si les images ont été modifiés par l'utilisateur\n\n      if (project.project_images_updated === true && project.project_is_youtube_not_images === false) {\n        for (var i = 0; i < project.project_images.length; i++) {\n          data.append(\"project_images\", project.project_images[i]);\n        }\n      }\n\n      data.append('project_is_file_format', project.project_is_file_format);\n      data.append('project_release_filename', project.project_release_filename);\n      data.append('project_release_url', project.project_release_url); //--------------------------------- Request --------------------------------------\n\n      ProjectDataService.update(id, data).then(function (response) {\n        setProject(function (prevState) {\n          return _objectSpread({}, prevState, {\n            project_is_updated: true\n          });\n        }); //SWAL\n\n        ToastDisplayer(false, \"Project updated !\");\n      }).catch(function (e) {\n        if (e.response.status === 422) {\n          // Reset des states pour éviter que certains messages persistent même apres correction\n          setNameValidation({\n            isValid: true,\n            message: \"\"\n          });\n          setTechnologiesValidation({\n            isValid: true,\n            message: \"\"\n          });\n          setDescriptionValidation({\n            isValid: true,\n            message: \"\"\n          });\n          setThumbnailValidation({\n            isValid: true,\n            message: \"\"\n          });\n          setYoutubeLinkValidation({\n            isValid: true,\n            message: \"\"\n          });\n          setImagesValidation({\n            isValid: true,\n            message: \"\"\n          });\n          setReleaseFileValidation({\n            isValid: true,\n            message: \"\"\n          });\n          setReleaseUrlValidation({\n            isValid: true,\n            message: \"\"\n          }); // Gestion des erreurs et ajout au state error\n\n          e.response.data.errors.forEach(function (error) {\n            switch (error.param) {\n              case \"project_name\":\n                setNameValidation({\n                  isValid: false,\n                  message: error.msg\n                });\n                break;\n\n              case \"project_technologies\":\n                setTechnologiesValidation({\n                  isValid: false,\n                  message: error.msg\n                });\n                break;\n\n              case \"project_description\":\n                setDescriptionValidation({\n                  isValid: false,\n                  message: error.msg\n                });\n                break;\n\n              case \"project_thumbnail_filename\":\n                setThumbnailValidation({\n                  isValid: false,\n                  message: error.msg\n                });\n                break;\n\n              case \"project_youtube_link\":\n                setYoutubeLinkValidation({\n                  isValid: false,\n                  message: error.msg\n                });\n                break;\n\n              case \"project_images\":\n                setImagesValidation({\n                  isValid: false,\n                  message: error.msg\n                });\n                break;\n\n              case \"project_release_filename\":\n                setReleaseFileValidation({\n                  isValid: false,\n                  message: error.msg\n                });\n                break;\n\n              case \"project_release_url\":\n                setReleaseUrlValidation({\n                  isValid: false,\n                  message: error.msg\n                });\n                break;\n            }\n          });\n        } else {\n          // SWAL\n          ToastDisplayer(true, \"Internal server error ...\");\n        }\n      });\n      setDisabledSubmit(false);\n    }\n  }; //----------------------------------------------------------- JSX -----------------------------------------------------\n\n\n  return /*#__PURE__*/React.createElement(FormProject, {\n    mode: \"update\",\n    project: project,\n    onChangeProject_name: onChangeProject_name,\n    onChangeProject_technologies: onChangeProject_technologies,\n    onChangeProject_description: onChangeProject_description,\n    onChangeProject_thumbnail_filename: onChangeProject_thumbnail_filename,\n    onChangeProject_is_youtube_not_images: onChangeProject_is_youtube_not_images,\n    onChangeProject_youtube_link: onChangeProject_youtube_link,\n    onChangeProject_images: onChangeProject_images,\n    onChangeProject_is_file_format: onChangeProject_is_file_format,\n    onChangeProject_release_filename: onChangeProject_release_filename,\n    onChangeProject_release_url: onChangeProject_release_url,\n    removeThumbnailPossibility: removeThumbnailPossibility,\n    removeImagesPossibility: removeImagesPossibility,\n    removeReleaseFilePossibility: removeReleaseFilePossibility,\n    onResetProject_images: onResetProject_images,\n    onResetProject_thumbnail_filename: onResetProject_thumbnail_filename,\n    onResetProject_release_filename: onResetProject_release_filename,\n    nameValidation: nameValidation,\n    technologiesValidation: technologiesValidation,\n    descriptionValidation: descriptionValidation,\n    thumbnailValidation: thumbnailValidation,\n    youtubeLinkValidation: youtubeLinkValidation,\n    imagesValidation: imagesValidation,\n    releaseFileValidation: releaseFileValidation,\n    releaseUrlValidation: releaseUrlValidation,\n    saveProject: saveProject,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 4\n    }\n  });\n}","map":{"version":3,"sources":["C:/Users/ricar/Desktop/myPortfolio/myPortofolio/src/components/Project/UpdateProject.js"],"names":["React","useState","useEffect","useNavigate","useParams","ProjectDataService","App","FormProject","ToastDisplayer","UpdateProject","props","navigate","project","project_is_updated","notFound","dataFound","setRemoveButtons","isAdmin","disabledSubmit","setDisabledSubmit","setNotFound","project_name","project_technologies","project_description","project_thumbnail_filename","project_is_youtube_not_images","project_youtube_link","project_images","project_is_file_format","project_release_filename","project_release_url","setProject","setDataFound","removeThumbnailPossibility","setRemoveThumbnailPossibility","removeImagesPossibility","setRemoveImagesPossibility","removeReleaseFilePossibility","setRemoveReleaseFilePossibility","isValid","message","nameValidation","setNameValidation","technologiesValidation","setTechnologiesValidation","descriptionValidation","setDescriptionValidation","thumbnailValidation","setThumbnailValidation","youtubeLinkValidation","setYoutubeLinkValidation","imagesValidation","setImagesValidation","releaseFileValidation","setReleaseFileValidation","releaseUrlValidation","setReleaseUrlValidation","id","getProject","get","then","response","data","catch","e","console","log","undefined","onChangeProject_name","prevState","target","value","onChangeProject_technologies","onChangeProject_description","onChangeProject_thumbnail_filename","files","onResetProject_thumbnail_filename","onChangeProject_is_youtube_not_images","result","project_images_updated","onChangeProject_youtube_link","onChangeProject_images","onResetProject_images","onChangeProject_is_file_format","onChangeProject_release_filename","onResetProject_release_filename","onChangeProject_release_url","saveProject","FormData","append","i","length","update","status","errors","forEach","error","param","msg"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport ProjectDataService from \"../../services/project.service\";\r\n//Components\r\nimport App from \"../../App\";\r\nimport FormProject from \"./FormProject\";\r\nimport ToastDisplayer from \"../ToastDisplayer\";\r\n\r\nexport default function UpdateProject(props) {\r\n\r\n  //----------------------------REDIRECTION APRES VALIDATION DU FORM ou 404 -----------------------\r\n  const navigate = useNavigate();\r\n  useEffect(() => { //si le composant a été updated d'une manière quelconque (state) alors ca s'execute\r\n    if (project.project_is_updated) {\r\n      navigate('/Projects');\r\n    }\r\n    if (notFound === true)\r\n    {\r\n      navigate('/NotFound');\r\n    }\r\n    if (dataFound === true)\r\n    {\r\n      setRemoveButtons();\r\n    }\r\n\r\n    // ----- Check if Admin AND redirect if not-------------\r\n    if (!props.isAdmin)\r\n    {\r\n        navigate('/Projects');\r\n    }\r\n  });\r\n\r\n\r\n  //--------------------------------- State Initial -------------------------------------\r\n\r\n  const [disabledSubmit, setDisabledSubmit] = useState(false); // Bloquage du bouton submit durant process\r\n\r\n  const [notFound,setNotFound] = useState (false); //id not found\r\n\r\n\tconst [project,setProject] = useState( //déclare en tant que liste key/value\r\n  { \r\n      project_name: \"\",\r\n      project_technologies: \"\",\r\n      project_description: \"\",\r\n      project_thumbnail_filename: null,\r\n      project_is_youtube_not_images : true,\r\n      project_youtube_link : \"\",\r\n      project_images: [],\r\n      project_is_file_format: true,\r\n      project_release_filename: null,\r\n      project_release_url: \"\",\r\n      project_is_updated: false,\r\n  });\r\n\r\n  //Pour reset une et une seule fois, en mode update, le champ file \r\n  // cad supprimer le fichier côté serveur\r\n  const [dataFound,setDataFound] = useState(false);\r\n  const [removeThumbnailPossibility,setRemoveThumbnailPossibility] = useState(false);\r\n  const [removeImagesPossibility, setRemoveImagesPossibility] = useState(false);\r\n  const [removeReleaseFilePossibility,setRemoveReleaseFilePossibility] = useState(false);\r\n\r\n\tconst [nameValidation, setNameValidation] = useState({\r\n    isValid : true,\r\n    message : \"\"\r\n  })\r\n\r\n  const [technologiesValidation, setTechnologiesValidation] = useState({\r\n    isValid : true,\r\n    message : \"\"\r\n  })\r\n\r\n  const [descriptionValidation, setDescriptionValidation] = useState({\r\n    isValid : true,\r\n    message : \"\"\r\n  })\r\n\r\n  const [thumbnailValidation, setThumbnailValidation] = useState({\r\n    isValid : true,\r\n    message : \"\"\r\n  })\r\n\r\n  const [youtubeLinkValidation, setYoutubeLinkValidation] = useState({\r\n    isValid : true,\r\n    message : \"\"\r\n  })\r\n\r\n  const [imagesValidation, setImagesValidation] = useState({\r\n    isValid : true,\r\n    message : \"\"\r\n  }) \r\n\r\n  const [releaseFileValidation, setReleaseFileValidation] = useState({\r\n    isValid : true,\r\n    message : \"\"\r\n  })\r\n\r\n  const [releaseUrlValidation, setReleaseUrlValidation] = useState({\r\n    isValid : true,\r\n    message : \"\"\r\n  })\r\n\r\n  // --------------- actualisation du state pour MODE UPDATE (herité avec props) -------------------------------\r\n  \r\n  const { id } = useParams(); //Retrouve le paramètre id\r\n  useEffect(() => { // à l'instanciation du component     \r\n      getProject(id);\r\n  },[]) //notice the empty array here so it only happens once \r\n\r\n  const getProject = (id) => {\r\n    ProjectDataService.get(id)\r\n      .then(response => {\r\n        setProject(response.data);\r\n        setDataFound(true); //pour définir les options de removes avec croix rouge   \r\n      })\r\n      .catch(e => {\r\n        setNotFound(true);\r\n        console.log(e);\r\n      });\r\n  }\r\n\r\n  const setRemoveButtons = () => {\r\n    setRemoveThumbnailPossibility(true); //Enclenche la possibilité de supprimer le fichier côté serveur\r\n    if (project.project_is_youtube_not_images === false) //seulement si c'est un release de type file\r\n    {\r\n      setRemoveImagesPossibility(true); //Enclenche la possibilité de supprimer le fichier côté serveur\r\n    }    \r\n    if (project.project_is_file_format === true) //seulement si c'est un release de type file\r\n    {\r\n      setRemoveReleaseFilePossibility(true); //Enclenche la possibilité de supprimer le fichier côté serveur\r\n    }\r\n    setDataFound(undefined); //Reset pour éviter que ca ne relance cette fonction à chaque modif du state\r\n  }\r\n\r\n// ------------------------- Evenementiel (modification du state en fonction des inputs) -------------------------\r\n\r\n  const onChangeProject_name = (e) => {\r\n    setProject(prevState => {\r\n      return { ...prevState, project_name : e.target.value }\r\n    });\r\n  }\r\n\r\n  const onChangeProject_technologies = (e) => {\r\n    setProject(prevState => {\r\n      return { ...prevState, project_technologies : e.target.value }\r\n    });\r\n  }\r\n\r\n  const onChangeProject_description = (e) => {\r\n    setProject(prevState => {\r\n      return { ...prevState, project_description : e.target.value }\r\n    });\r\n  }\r\n\r\n  const onChangeProject_thumbnail_filename = (e) => {\r\n    setProject(prevState => {\r\n      return { ...prevState, project_thumbnail_filename : e.target.files[0] } //pcq c'est un fichier\r\n    });\r\n  }\r\n\r\n  const onResetProject_thumbnail_filename = () => {\r\n    setProject(prevState => {\r\n      return { ...prevState, project_thumbnail_filename : null } //pcq c'est un fichier\r\n    });\r\n    setRemoveThumbnailPossibility(false);\r\n  }\r\n\r\n  const onChangeProject_is_youtube_not_images = (e) => {\r\n    let result = true; \r\n    //si on passe e.target.value, project_is_file_format pointera sur un objet et non une valeur\r\n    // du coup setState n'aura plus d'incidence\r\n    if (e.target.value === \"true\")\r\n    {\r\n      result = true;\r\n      setProject(prevState => {\r\n        return { ...prevState, project_images_updated : false } //pcq c'est un fichier\r\n      });\r\n    }\r\n    else {\r\n      result = false;\r\n      setProject(prevState => {\r\n        return { ...prevState, project_images_updated : true } //pcq c'est un fichier\r\n      });\r\n    }\r\n    setProject(prevState => {\r\n      return { ...prevState, project_is_youtube_not_images : result }\r\n    });\r\n  }\r\n\r\n  const onChangeProject_youtube_link = (e) => {\r\n    setProject(prevState => {\r\n      return { ...prevState, project_youtube_link :  e.target.value  } \r\n    });\r\n\r\n  }\r\n\r\n  const onChangeProject_images = (e) => {\r\n    setProject(prevState => {\r\n      return { ...prevState, project_images : e.target.files } //pas d'index pcq c'est multifile\r\n    });\r\n  }\r\n\r\n  const onResetProject_images = () => {\r\n    setProject(prevState => {\r\n      return { ...prevState, project_images_updated : true } //pcq c'est un fichier\r\n    });\r\n    setRemoveImagesPossibility(false);\r\n  }\r\n\r\n  const onChangeProject_is_file_format = (e) => {\r\n    let result = true; \r\n    //si on passe e.target.value, project_is_file_format pointera sur un objet et non une valeur\r\n    // du coup setState n'aura plus d'incidence\r\n    if (e.target.value === \"true\")\r\n    {\r\n      result = true;\r\n    }\r\n    else {\r\n      result = false;\r\n    }\r\n    setProject(prevState => {\r\n      return { ...prevState, project_is_file_format : result }\r\n    });\r\n  }\r\n\r\n  const onChangeProject_release_filename = (e) => {\r\n    setProject(prevState => {\r\n      return { ...prevState, project_release_filename : e.target.files[0]  }\r\n    });\r\n  }\r\n\r\n  const onResetProject_release_filename = () => {\r\n    setProject(prevState => {\r\n      return { ...prevState, project_release_filename : null } //pcq c'est un fichier\r\n    });\r\n    setRemoveReleaseFilePossibility(false);\r\n  }\r\n\r\n  const onChangeProject_release_url = (e) => {\r\n    setProject(prevState => {\r\n      return { ...prevState, project_release_url : e.target.value }\r\n    });\r\n  } \r\n\r\n//------------------------------------ CALL API ----------------------------------------------------------\r\n\r\n  const saveProject = (e) => {\r\n\r\n    if (disabledSubmit === false){\r\n      setDisabledSubmit(true);\r\n\r\n      //------------- instanciation d'un objet FormData pour envoyer les données à l'API --------------   \r\n      let data = new FormData(); // --> \"content\" : \"multipart/form-data\"\r\n      data.append('project_name', project.project_name);\r\n      data.append('project_technologies', project.project_technologies);\r\n      data.append('project_description', project.project_description);\r\n      data.append('project_thumbnail_filename', project.project_thumbnail_filename);\r\n      data.append('project_is_youtube_not_images', project.project_is_youtube_not_images);\r\n      data.append('project_youtube_link', project.project_youtube_link);\r\n      // images files\r\n      data.append('project_images_updated', project.project_images_updated);\r\n      //Si les images ont été modifiés par l'utilisateur\r\n      if ( project.project_images_updated === true && project.project_is_youtube_not_images === false) \r\n      {\r\n        for (let i = 0; i < project.project_images.length; i++) {\r\n          data.append(`project_images`, project.project_images[i]);\r\n        }    \r\n      }  \r\n\r\n      data.append('project_is_file_format', project.project_is_file_format);\r\n      data.append('project_release_filename', project.project_release_filename);\r\n      data.append('project_release_url', project.project_release_url);\r\n\r\n      //--------------------------------- Request --------------------------------------\r\n      ProjectDataService.update(id,data)\r\n        .then(response => {\r\n          setProject(prevState => {\r\n            return { ...prevState, project_is_updated : true }\r\n          });\r\n          //SWAL\r\n          ToastDisplayer(false, \"Project updated !\");\r\n        })\r\n        .catch(e => {\r\n          if (e.response.status === 422) {\r\n\r\n            // Reset des states pour éviter que certains messages persistent même apres correction\r\n          setNameValidation({isValid : true, message : \"\"});\r\n          setTechnologiesValidation({isValid : true, message : \"\"});\r\n          setDescriptionValidation({isValid : true, message : \"\"});\r\n          setThumbnailValidation({isValid : true, message : \"\"});\r\n          setYoutubeLinkValidation({isValid : true, message : \"\"});\r\n          setImagesValidation({isValid: true, message:\"\"});\r\n          setReleaseFileValidation({isValid : true, message : \"\"});\r\n          setReleaseUrlValidation({isValid : true, message : \"\"}) ;\r\n            // Gestion des erreurs et ajout au state error\r\n            e.response.data.errors.forEach(error => {\r\n              switch (error.param) {\r\n                case \"project_name\":\r\n                  setNameValidation({isValid : false, message : error.msg});\r\n                  break;\r\n                case \"project_technologies\":\r\n                  setTechnologiesValidation({isValid : false, message : error.msg});\r\n                  break;\r\n                case \"project_description\":\r\n                  setDescriptionValidation({isValid : false, message : error.msg});\r\n                  break;\r\n                case \"project_thumbnail_filename\":\r\n                  setThumbnailValidation({isValid : false, message : error.msg});\r\n                  break;\r\n                case \"project_youtube_link\":\r\n                  setYoutubeLinkValidation({isValid : false, message : error.msg});\r\n                  break;\r\n                case \"project_images\":\r\n                  setImagesValidation({isValid : false, message : error.msg});\r\n                  break;\r\n                case \"project_release_filename\":\r\n                  setReleaseFileValidation({isValid : false, message : error.msg});\r\n                  break;\r\n                case \"project_release_url\":\r\n                  setReleaseUrlValidation({isValid : false, message : error.msg});\r\n                  break;\r\n              }\r\n            });\r\n\r\n          }\r\n          else \r\n          {\r\n            // SWAL\r\n            ToastDisplayer(true, \"Internal server error ...\");\r\n          }  \r\n        });\r\n\r\n      setDisabledSubmit(false);\r\n    }\r\n   \r\n  }\r\n\r\n\r\n//----------------------------------------------------------- JSX -----------------------------------------------------\r\n\r\n\treturn (\r\n\r\n\t\t\t<FormProject\r\n\t\t\t\tmode=\"update\"\r\n\t\t\t\tproject= {project}\r\n\r\n\t\t\t\tonChangeProject_name = {onChangeProject_name}\r\n\t  \t\tonChangeProject_technologies = {onChangeProject_technologies}\r\n\t  \t\tonChangeProject_description = {onChangeProject_description}\r\n\t  \t\tonChangeProject_thumbnail_filename = {onChangeProject_thumbnail_filename}\r\n        onChangeProject_is_youtube_not_images = {onChangeProject_is_youtube_not_images}\r\n        onChangeProject_youtube_link = {onChangeProject_youtube_link}\r\n\t  \t\tonChangeProject_images = {onChangeProject_images}\r\n\t  \t\tonChangeProject_is_file_format = {onChangeProject_is_file_format}\r\n\t  \t\tonChangeProject_release_filename = {onChangeProject_release_filename}\r\n\t  \t\tonChangeProject_release_url = {onChangeProject_release_url}\r\n\r\n\t  \t\tremoveThumbnailPossibility = {removeThumbnailPossibility}\r\n\t  \t\tremoveImagesPossibility = {removeImagesPossibility} \r\n\t  \t\tremoveReleaseFilePossibility = {removeReleaseFilePossibility}\r\n\r\n\t  \t\tonResetProject_images = {onResetProject_images}\r\n\t  \t\tonResetProject_thumbnail_filename = {onResetProject_thumbnail_filename} \r\n\t  \t\tonResetProject_release_filename = {onResetProject_release_filename}\r\n\r\n\t\t\t\tnameValidation = {nameValidation}\r\n\t\t\t\ttechnologiesValidation = {technologiesValidation}\r\n\t\t\t\tdescriptionValidation = {descriptionValidation}\r\n\t\t\t\tthumbnailValidation = {thumbnailValidation}\r\n        youtubeLinkValidation = {youtubeLinkValidation}\r\n\t\t\t\timagesValidation = {imagesValidation}\r\n\t\t\t\treleaseFileValidation = {releaseFileValidation}\r\n\t\t\t\treleaseUrlValidation = {releaseUrlValidation}\r\n\r\n\t\t\t\tsaveProject = {saveProject}\r\n\t\t\t>\r\n\t\t\t</FormProject>\r\n\r\n\t);\r\n}"]},"metadata":{},"sourceType":"module"}